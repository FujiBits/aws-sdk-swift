// Code generated by smithy-swift-codegen. DO NOT EDIT!

import ClientRuntime

extension VCpuInfo: Codable, Reflection {
    enum CodingKeys: String, CodingKey {
        case defaultCores = "defaultCores"
        case defaultThreadsPerCore = "defaultThreadsPerCore"
        case defaultVCpus = "defaultVCpus"
        case validCores = "validCores"
        case validThreadsPerCore = "validThreadsPerCore"
    }

    public func encode(to encoder: Encoder) throws {
        var container = encoder.container(keyedBy: Key.self)
        if let defaultCores = defaultCores {
            try container.encode(defaultCores, forKey: Key("DefaultCores"))
        }
        if let defaultThreadsPerCore = defaultThreadsPerCore {
            try container.encode(defaultThreadsPerCore, forKey: Key("DefaultThreadsPerCore"))
        }
        if let defaultVCpus = defaultVCpus {
            try container.encode(defaultVCpus, forKey: Key("DefaultVCpus"))
        }
        if let validCores = validCores {
            if !validCores.isEmpty {
                for (index0, corecount0) in validCores.enumerated() {
                    var validCoresContainer0 = container.nestedContainer(keyedBy: Key.self, forKey: Key("ValidCores.\(index0.advanced(by: 1))"))
                    try validCoresContainer0.encode(corecount0, forKey: Key(""))
                }
            }
        }
        if let validThreadsPerCore = validThreadsPerCore {
            if !validThreadsPerCore.isEmpty {
                for (index0, threadspercore0) in validThreadsPerCore.enumerated() {
                    var validThreadsPerCoreContainer0 = container.nestedContainer(keyedBy: Key.self, forKey: Key("ValidThreadsPerCore.\(index0.advanced(by: 1))"))
                    try validThreadsPerCoreContainer0.encode(threadspercore0, forKey: Key(""))
                }
            }
        }
    }

    public init (from decoder: Decoder) throws {
        let containerValues = try decoder.container(keyedBy: CodingKeys.self)
        let defaultVCpusDecoded = try containerValues.decodeIfPresent(Int.self, forKey: .defaultVCpus)
        defaultVCpus = defaultVCpusDecoded
        let defaultCoresDecoded = try containerValues.decodeIfPresent(Int.self, forKey: .defaultCores)
        defaultCores = defaultCoresDecoded
        let defaultThreadsPerCoreDecoded = try containerValues.decodeIfPresent(Int.self, forKey: .defaultThreadsPerCore)
        defaultThreadsPerCore = defaultThreadsPerCoreDecoded
        if containerValues.contains(.validCores) {
            struct KeyVal0{struct item{}}
            let validCoresWrappedContainer = containerValues.nestedContainerNonThrowable(keyedBy: CollectionMemberCodingKey<KeyVal0.item>.CodingKeys.self, forKey: .validCores)
            if let validCoresWrappedContainer = validCoresWrappedContainer {
                let validCoresContainer = try validCoresWrappedContainer.decodeIfPresent([Int].self, forKey: .member)
                var validCoresBuffer:[Int]? = nil
                if let validCoresContainer = validCoresContainer {
                    validCoresBuffer = [Int]()
                    for integerContainer0 in validCoresContainer {
                        validCoresBuffer?.append(integerContainer0)
                    }
                }
                validCores = validCoresBuffer
            } else {
                validCores = []
            }
        } else {
            validCores = nil
        }
        if containerValues.contains(.validThreadsPerCore) {
            struct KeyVal0{struct item{}}
            let validThreadsPerCoreWrappedContainer = containerValues.nestedContainerNonThrowable(keyedBy: CollectionMemberCodingKey<KeyVal0.item>.CodingKeys.self, forKey: .validThreadsPerCore)
            if let validThreadsPerCoreWrappedContainer = validThreadsPerCoreWrappedContainer {
                let validThreadsPerCoreContainer = try validThreadsPerCoreWrappedContainer.decodeIfPresent([Int].self, forKey: .member)
                var validThreadsPerCoreBuffer:[Int]? = nil
                if let validThreadsPerCoreContainer = validThreadsPerCoreContainer {
                    validThreadsPerCoreBuffer = [Int]()
                    for integerContainer0 in validThreadsPerCoreContainer {
                        validThreadsPerCoreBuffer?.append(integerContainer0)
                    }
                }
                validThreadsPerCore = validThreadsPerCoreBuffer
            } else {
                validThreadsPerCore = []
            }
        } else {
            validThreadsPerCore = nil
        }
    }
}

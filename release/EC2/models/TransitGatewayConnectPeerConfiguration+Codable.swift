// Code generated by smithy-swift-codegen. DO NOT EDIT!

import ClientRuntime

extension TransitGatewayConnectPeerConfiguration: Codable, Reflection {
    enum CodingKeys: String, CodingKey {
        case bgpConfigurations = "bgpConfigurations"
        case insideCidrBlocks = "insideCidrBlocks"
        case peerAddress = "peerAddress"
        case `protocol` = "protocol"
        case transitGatewayAddress = "transitGatewayAddress"
    }

    public func encode(to encoder: Encoder) throws {
        var container = encoder.container(keyedBy: Key.self)
        if let bgpConfigurations = bgpConfigurations {
            if !bgpConfigurations.isEmpty {
                for (index0, transitgatewayattachmentbgpconfiguration0) in bgpConfigurations.enumerated() {
                    var bgpConfigurationsContainer0 = container.nestedContainer(keyedBy: Key.self, forKey: Key("BgpConfigurations.\(index0.advanced(by: 1))"))
                    try bgpConfigurationsContainer0.encode(transitgatewayattachmentbgpconfiguration0, forKey: Key(""))
                }
            }
        }
        if let insideCidrBlocks = insideCidrBlocks {
            if !insideCidrBlocks.isEmpty {
                for (index0, string0) in insideCidrBlocks.enumerated() {
                    var insideCidrBlocksContainer0 = container.nestedContainer(keyedBy: Key.self, forKey: Key("InsideCidrBlocks.\(index0.advanced(by: 1))"))
                    try insideCidrBlocksContainer0.encode(string0, forKey: Key(""))
                }
            }
        }
        if let peerAddress = peerAddress {
            try container.encode(peerAddress, forKey: Key("PeerAddress"))
        }
        if let `protocol` = `protocol` {
            try container.encode(`protocol`, forKey: Key("Protocol"))
        }
        if let transitGatewayAddress = transitGatewayAddress {
            try container.encode(transitGatewayAddress, forKey: Key("TransitGatewayAddress"))
        }
    }

    public init (from decoder: Decoder) throws {
        let containerValues = try decoder.container(keyedBy: CodingKeys.self)
        let transitGatewayAddressDecoded = try containerValues.decodeIfPresent(String.self, forKey: .transitGatewayAddress)
        transitGatewayAddress = transitGatewayAddressDecoded
        let peerAddressDecoded = try containerValues.decodeIfPresent(String.self, forKey: .peerAddress)
        peerAddress = peerAddressDecoded
        if containerValues.contains(.insideCidrBlocks) {
            struct KeyVal0{struct item{}}
            let insideCidrBlocksWrappedContainer = containerValues.nestedContainerNonThrowable(keyedBy: CollectionMemberCodingKey<KeyVal0.item>.CodingKeys.self, forKey: .insideCidrBlocks)
            if let insideCidrBlocksWrappedContainer = insideCidrBlocksWrappedContainer {
                let insideCidrBlocksContainer = try insideCidrBlocksWrappedContainer.decodeIfPresent([String].self, forKey: .member)
                var insideCidrBlocksBuffer:[String]? = nil
                if let insideCidrBlocksContainer = insideCidrBlocksContainer {
                    insideCidrBlocksBuffer = [String]()
                    for stringContainer0 in insideCidrBlocksContainer {
                        insideCidrBlocksBuffer?.append(stringContainer0)
                    }
                }
                insideCidrBlocks = insideCidrBlocksBuffer
            } else {
                insideCidrBlocks = []
            }
        } else {
            insideCidrBlocks = nil
        }
        let protocolDecoded = try containerValues.decodeIfPresent(ProtocolValue.self, forKey: .protocol)
        `protocol` = protocolDecoded
        if containerValues.contains(.bgpConfigurations) {
            struct KeyVal0{struct item{}}
            let bgpConfigurationsWrappedContainer = containerValues.nestedContainerNonThrowable(keyedBy: CollectionMemberCodingKey<KeyVal0.item>.CodingKeys.self, forKey: .bgpConfigurations)
            if let bgpConfigurationsWrappedContainer = bgpConfigurationsWrappedContainer {
                let bgpConfigurationsContainer = try bgpConfigurationsWrappedContainer.decodeIfPresent([TransitGatewayAttachmentBgpConfiguration].self, forKey: .member)
                var bgpConfigurationsBuffer:[TransitGatewayAttachmentBgpConfiguration]? = nil
                if let bgpConfigurationsContainer = bgpConfigurationsContainer {
                    bgpConfigurationsBuffer = [TransitGatewayAttachmentBgpConfiguration]()
                    for structureContainer0 in bgpConfigurationsContainer {
                        bgpConfigurationsBuffer?.append(structureContainer0)
                    }
                }
                bgpConfigurations = bgpConfigurationsBuffer
            } else {
                bgpConfigurations = []
            }
        } else {
            bgpConfigurations = nil
        }
    }
}

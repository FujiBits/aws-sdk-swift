// Code generated by smithy-swift-codegen. DO NOT EDIT!

import ClientRuntime

extension S3Location: Codable, Reflection {
    enum CodingKeys: String, CodingKey {
        case accessControlList = "AccessControlList"
        case bucketName = "BucketName"
        case cannedACL = "CannedACL"
        case encryption = "Encryption"
        case prefix = "Prefix"
        case storageClass = "StorageClass"
        case tagging = "Tagging"
        case userMetadata = "UserMetadata"
    }

    public func encode(to encoder: Encoder) throws {
        var encodeContainer = encoder.container(keyedBy: CodingKeys.self)
        if let accessControlList = accessControlList {
            var accessControlListContainer = encodeContainer.nestedUnkeyedContainer(forKey: .accessControlList)
            for accesscontrolpolicylist0 in accessControlList {
                try accessControlListContainer.encode(accesscontrolpolicylist0)
            }
        }
        if let bucketName = bucketName {
            try encodeContainer.encode(bucketName, forKey: .bucketName)
        }
        if let cannedACL = cannedACL {
            try encodeContainer.encode(cannedACL.rawValue, forKey: .cannedACL)
        }
        if let encryption = encryption {
            try encodeContainer.encode(encryption, forKey: .encryption)
        }
        if let prefix = prefix {
            try encodeContainer.encode(prefix, forKey: .prefix)
        }
        if let storageClass = storageClass {
            try encodeContainer.encode(storageClass.rawValue, forKey: .storageClass)
        }
        if let tagging = tagging {
            var taggingContainer = encodeContainer.nestedContainer(keyedBy: Key.self, forKey: .tagging)
            for (dictKey0, hashmap0) in tagging {
                try taggingContainer.encode(hashmap0, forKey: Key(stringValue: dictKey0))
            }
        }
        if let userMetadata = userMetadata {
            var userMetadataContainer = encodeContainer.nestedContainer(keyedBy: Key.self, forKey: .userMetadata)
            for (dictKey0, hashmap0) in userMetadata {
                try userMetadataContainer.encode(hashmap0, forKey: Key(stringValue: dictKey0))
            }
        }
    }

    public init (from decoder: Decoder) throws {
        let containerValues = try decoder.container(keyedBy: CodingKeys.self)
        let bucketNameDecoded = try containerValues.decodeIfPresent(String.self, forKey: .bucketName)
        bucketName = bucketNameDecoded
        let prefixDecoded = try containerValues.decodeIfPresent(String.self, forKey: .prefix)
        prefix = prefixDecoded
        let encryptionDecoded = try containerValues.decodeIfPresent(Encryption.self, forKey: .encryption)
        encryption = encryptionDecoded
        let cannedACLDecoded = try containerValues.decodeIfPresent(CannedACL.self, forKey: .cannedACL)
        cannedACL = cannedACLDecoded
        let accessControlListContainer = try containerValues.decodeIfPresent([Grant?].self, forKey: .accessControlList)
        var accessControlListDecoded0:[Grant]? = nil
        if let accessControlListContainer = accessControlListContainer {
            accessControlListDecoded0 = [Grant]()
            for structure0 in accessControlListContainer {
                if let structure0 = structure0 {
                    accessControlListDecoded0?.append(structure0)
                }
            }
        }
        accessControlList = accessControlListDecoded0
        let taggingContainer = try containerValues.decodeIfPresent([String: String?].self, forKey: .tagging)
        var taggingDecoded0: [String:String]? = nil
        if let taggingContainer = taggingContainer {
            taggingDecoded0 = [String:String]()
            for (key0, string0) in taggingContainer {
                if let string0 = string0 {
                    taggingDecoded0?[key0] = string0
                }
            }
        }
        tagging = taggingDecoded0
        let userMetadataContainer = try containerValues.decodeIfPresent([String: String?].self, forKey: .userMetadata)
        var userMetadataDecoded0: [String:String]? = nil
        if let userMetadataContainer = userMetadataContainer {
            userMetadataDecoded0 = [String:String]()
            for (key0, string0) in userMetadataContainer {
                if let string0 = string0 {
                    userMetadataDecoded0?[key0] = string0
                }
            }
        }
        userMetadata = userMetadataDecoded0
        let storageClassDecoded = try containerValues.decodeIfPresent(StorageClass.self, forKey: .storageClass)
        storageClass = storageClassDecoded
    }
}
